<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desk Picker</title>
    <style>
      body { margin: 0; background: #111; color: #eee; font-family: system-ui, sans-serif; }
      .wrap { display: flex; gap: 16px; padding: 16px; }
      .canvas { position: relative; border: 1px solid #333; }
      .canvas img { display: block; image-rendering: pixelated; }
      .marker { position: absolute; width: 10px; height: 10px; border: 2px solid #ffcc00; border-radius: 50%; transform: translate(-50%, -50%); pointer-events: none; }
      .sidebar { width: 280px; }
      textarea { width: 100%; height: 300px; background: #1a1a1a; color: #eee; border: 1px solid #333; padding: 8px; }
      button { padding: 8px 12px; background: #d9a441; border: none; border-radius: 8px; cursor: pointer; }
      .hint { font-size: 12px; opacity: 0.7; margin-top: 8px; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="canvas" id="canvas">
        <img id="bg" src="/tilesets/no-people.png" alt="background" />
      </div>
      <div class="sidebar">
        <h3>Desk Points</h3>
        <textarea id="output" readonly></textarea>
        <button id="copy">Copy JSON</button>
        <div class="hint">Click on desks to add spawn points. Refresh to clear.</div>
      </div>
    </div>
    <script>
      const canvas = document.getElementById('canvas');
      const output = document.getElementById('output');
      const points = [];

      canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = Math.round(e.clientX - rect.left);
        const y = Math.round(e.clientY - rect.top);
        points.push({ x, y });
        const marker = document.createElement('div');
        marker.className = 'marker';
        marker.style.left = `${x}px`;
        marker.style.top = `${y}px`;
        canvas.appendChild(marker);
        output.value = JSON.stringify(points, null, 2);
      });

      document.getElementById('copy').addEventListener('click', async () => {
        await navigator.clipboard.writeText(output.value);
      });
    </script>
  </body>
</html>
