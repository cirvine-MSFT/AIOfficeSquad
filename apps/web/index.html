<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AIOffice</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <div id="app">
      <div id="game-container"></div>
      <div id="ui-panel" aria-live="polite" class="panel sidebar">
        <div class="panel-header">
          <div class="panel-header-info">
            <div class="panel-title-row">
              <span class="panel-title" id="panel-title">Agent</span>
              <span class="panel-provider" id="panel-provider"></span>
            </div>
            <div class="panel-subtitle" id="panel-status">status</div>
          </div>
          <div class="panel-header-actions">
            <button id="panel-new-chat" class="panel-action-btn panel-new-btn" aria-label="New Chat" title="New Conversation">+</button>
            <button id="panel-delete" class="panel-action-btn panel-delete-btn" aria-label="Delete Agent" title="Delete Agent">√ó</button>
            <button id="panel-close" class="panel-close" aria-label="Close">Esc</button>
          </div>
        </div>
        <div id="panel-tabs" class="panel-tabs hidden">
          <button id="tab-chat" class="panel-tab active">Chat</button>
          <button id="tab-terminal" class="panel-tab">Terminal</button>
        </div>
        <div id="chat-target-bar" class="chat-target-bar hidden"></div>
        <div id="panel-empty" class="panel-empty">
          <div class="panel-empty-title">Chat not active</div>
          <div class="panel-empty-subtitle">Click an agent or press 1-9 to start chatting.</div>
        </div>
        <div id="panel-messages" class="panel-messages panel-chat"></div>
        <div id="terminal-container" class="terminal-container hidden"></div>
        <div class="panel-chat-input">
          <input id="chat-input" type="text" placeholder="Message this agent..." />
          <button id="chat-send" class="panel-send">Send</button>
        </div>
        <div class="panel-hint">Click agent or press 1-9. Esc to close.</div>
      </div>
      <div id="hud" class="hud">
        <div class="hud-title">AIOffice</div>
        <div class="hud-subtitle">Click/1-9: select agent ‚Ä¢ D: decisions ‚Ä¢ S: status ‚Ä¢ C: ceremony ‚Ä¢ ?: help</div>
      </div>
      <div id="audio-controls" class="audio-controls">
        <button id="audio-play" class="audio-btn" aria-label="Play music">
          <svg viewBox="0 0 12 12" class="audio-icon" aria-hidden="true">
            <rect x="1" y="1" width="2" height="10" />
            <rect x="3" y="2" width="2" height="8" />
            <rect x="5" y="3" width="2" height="6" />
            <rect x="7" y="4" width="2" height="4" />
            <rect x="9" y="5" width="2" height="2" />
          </svg>
        </button>
        <button id="audio-pause" class="audio-btn" aria-label="Pause music">
          <svg viewBox="0 0 12 12" class="audio-icon" aria-hidden="true">
            <rect x="2" y="1" width="3" height="10" />
            <rect x="7" y="1" width="3" height="10" />
          </svg>
        </button>
      </div>
      <div id="top-banner" class="top-banner hidden" role="status" aria-live="polite">
        <span id="top-banner-text"></span>
        <button id="top-banner-close" class="top-banner-close" aria-label="Dismiss">√ó</button>
      </div>
      <!-- Decisions Panel (Issue #3) -->
      <div id="decisions-panel" class="decisions-panel" role="dialog" aria-label="Team Decisions">
        <div class="decisions-panel-header">
          <h2>üìã Team Decisions</h2>
          <button class="decisions-panel-close" id="decisions-panel-close" aria-label="Close">√ó</button>
        </div>
        <div id="decisions-list" class="decisions-list">
          <div class="decisions-empty">No decisions yet</div>
        </div>
      </div>

      <!-- Building Dashboard (Issue #16) -->
      <div id="building-dashboard" class="building-dashboard" role="dialog" aria-label="Building Dashboard">
        <div class="dashboard-content">
          <div class="dashboard-header">
            <h2>üè¢ Office Building</h2>
            <p>Click a squad to enter their pod</p>
          </div>
          <div id="dashboard-squads" class="dashboard-squads"></div>
          <div class="dashboard-footer">Press Tab or Escape to close</div>
        </div>
      </div>

      <!-- Roster Sidebar (#22) -->
      <div id="roster-sidebar" class="roster-sidebar">
        <div class="roster-header">
          <span class="roster-title">üë• Team</span>
          <button id="roster-toggle" class="roster-toggle" aria-label="Toggle roster">‚óÄ</button>
        </div>
        <div id="roster-list" class="roster-list"></div>
      </div>

      <!-- Help Overlay (#22) -->
      <div id="help-overlay" class="help-overlay hidden" role="dialog" aria-label="Keyboard Shortcuts">
        <div class="help-content">
          <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
          <div class="help-grid">
            <kbd>1-9</kbd><span>Select agent / Enter pod</span>
            <kbd>R</kbd><span>Room chat</span>
            <kbd>D</kbd><span>Decisions panel</span>
            <kbd>S</kbd><span>Status dashboard</span>
            <kbd>C</kbd><span>Start ceremony</span>
            <kbd>Tab</kbd><span>Building dashboard</span>
            <kbd>Esc</kbd><span>Close / Back</span>
            <kbd>?</kbd><span>This help</span>
            <kbd>Click</kbd><span>Select agent / Enter pod</span>
          </div>
          <div class="help-footer">Press ? or Esc to close</div>
        </div>
      </div>

      <!-- Add Agent Button -->
      <button id="add-agent-btn" class="add-agent-btn" aria-label="Add Agent">+</button>
      <!-- Add Agent Modal -->
      <div id="add-agent-modal" class="modal hidden">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Add New Agent</h2>
            <button id="modal-close" class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="squad-member-select">Squad Member</label>
              <select id="squad-member-select" class="squad-member-select">
                <option value="">‚Äî Select a squad member ‚Äî</option>
              </select>
            </div>
            <div id="squad-member-preview" class="squad-member-preview hidden">
              <span class="member-badge" id="preview-badge"></span>
              <span class="member-name" id="preview-name"></span>
              <span class="member-role" id="preview-role"></span>
              <span class="member-scope" id="preview-scope"></span>
            </div>
            <div class="form-group">
              <label for="agent-name">Agent Name</label>
              <input type="text" id="agent-name" placeholder="Pre-filled from squad member" />
            </div>
            <div class="form-group hidden" id="cli-type-group">
              <label for="agent-cli">CLI Type</label>
              <select id="agent-cli">
                <option value="claude-code">Claude Code</option>
                <option value="copilot-cli">GitHub Copilot</option>
              </select>
            </div>
            <div class="form-group">
              <label for="agent-dir">Working Directory <small style="opacity:0.5">(full path or run pwd in terminal)</small></label>
              <input type="text" id="agent-dir" placeholder="/Users/you/projects/myapp" />
            </div>
            <div class="form-group">
              <label for="agent-personality">Personality <small style="opacity:0.5">(optional)</small></label>
              <input type="text" id="agent-personality" placeholder="e.g., Sarcastic senior engineer who's seen it all" />
            </div>
            <div class="form-group" style="flex-direction:row;align-items:center;gap:8px;">
              <input type="checkbox" id="agent-continue" style="width:auto;" />
              <label for="agent-continue" style="margin:0;cursor:pointer;">Continue previous conversation in this directory</label>
            </div>
            <button id="create-agent-btn" class="panel-send" style="width:100%;margin-top:12px;">Spawn Member</button>
            <div id="agent-command" class="agent-command hidden">
              <p>Run this command in your project folder:</p>
              <code id="agent-command-text"></code>
            </div>
          </div>
        </div>
      </div>
      <audio id="bgm" preload="auto">
        <source src="/audio/motivate-the-floor.mp3" type="audio/mpeg" />
      </audio>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
