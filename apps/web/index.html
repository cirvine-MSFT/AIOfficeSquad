<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AIOffice</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <div id="app">
      <div id="game-container"></div>
      <div id="ui-panel" aria-live="polite" class="panel sidebar">
        <div class="panel-header">
          <div class="panel-header-info">
            <div class="panel-title-row">
              <span class="panel-title" id="panel-title">Agent</span>
              <span class="panel-provider" id="panel-provider"></span>
            </div>
            <div class="panel-subtitle" id="panel-status">status</div>
          </div>
          <div class="panel-header-actions">
            <button id="panel-new-chat" class="panel-action-btn panel-new-btn" aria-label="New Chat" title="New Conversation">+</button>
            <button id="panel-delete" class="panel-action-btn panel-delete-btn" aria-label="Delete Agent" title="Delete Agent">×</button>
            <button id="panel-close" class="panel-close" aria-label="Close">Esc</button>
          </div>
        </div>
        <div id="panel-tabs" class="panel-tabs hidden">
          <button id="tab-chat" class="panel-tab active">Chat</button>
          <button id="tab-terminal" class="panel-tab">Terminal</button>
        </div>
        <div id="panel-empty" class="panel-empty hidden">
          <div class="panel-empty-title">Chat not active</div>
          <div class="panel-empty-subtitle">Walk up to an agent and press E.</div>
        </div>
        <div id="panel-messages" class="panel-messages panel-chat"></div>
        <div id="terminal-container" class="terminal-container hidden"></div>
        <div class="panel-chat-input">
          <input id="chat-input" type="text" placeholder="Message this agent..." />
          <button id="chat-send" class="panel-send">Send</button>
        </div>
        <div class="panel-hint">Press E near an agent. Esc to close.</div>
      </div>
      <div id="hud" class="hud">
        <div class="hud-title">AIOffice</div>
        <div class="hud-subtitle">WASD to move. E to talk. 1-9 to jump to agent. Esc to close.</div>
      </div>
      <div id="audio-controls" class="audio-controls">
        <button id="audio-play" class="audio-btn" aria-label="Play music">
          <svg viewBox="0 0 12 12" class="audio-icon" aria-hidden="true">
            <rect x="1" y="1" width="2" height="10" />
            <rect x="3" y="2" width="2" height="8" />
            <rect x="5" y="3" width="2" height="6" />
            <rect x="7" y="4" width="2" height="4" />
            <rect x="9" y="5" width="2" height="2" />
          </svg>
        </button>
        <button id="audio-pause" class="audio-btn" aria-label="Pause music">
          <svg viewBox="0 0 12 12" class="audio-icon" aria-hidden="true">
            <rect x="2" y="1" width="3" height="10" />
            <rect x="7" y="1" width="3" height="10" />
          </svg>
        </button>
      </div>
      <div id="top-banner" class="top-banner hidden" role="status" aria-live="polite">
        <span id="top-banner-text"></span>
        <button id="top-banner-close" class="top-banner-close" aria-label="Dismiss">×</button>
      </div>
      <!-- Add Agent Button -->
      <button id="add-agent-btn" class="add-agent-btn" aria-label="Add Agent">+</button>
      <!-- Add Agent Modal -->
      <div id="add-agent-modal" class="modal hidden">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Add New Agent</h2>
            <button id="modal-close" class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="agent-name">Name (leave blank for random)</label>
              <input type="text" id="agent-name" placeholder="e.g., Bob" />
            </div>
            <div class="form-group">
              <label for="agent-cli">CLI Type</label>
              <select id="agent-cli">
                <option value="claude-code">Claude Code</option>
                <option value="copilot-cli">GitHub Copilot</option>
              </select>
            </div>
            <div class="form-group">
              <label for="agent-dir">Working Directory <small style="opacity:0.5">(full path or run pwd in terminal)</small></label>
              <input type="text" id="agent-dir" placeholder="/Users/you/projects/myapp" />
            </div>
            <div class="form-group">
              <label for="agent-personality">Personality <small style="opacity:0.5">(optional)</small></label>
              <input type="text" id="agent-personality" placeholder="e.g., Sarcastic senior engineer who's seen it all" />
            </div>
            <div class="form-group" style="flex-direction:row;align-items:center;gap:8px;">
              <input type="checkbox" id="agent-continue" style="width:auto;" />
              <label for="agent-continue" style="margin:0;cursor:pointer;">Continue previous conversation in this directory</label>
            </div>
            <button id="create-agent-btn" class="panel-send" style="width:100%;margin-top:12px;">Create Agent</button>
            <div id="agent-command" class="agent-command hidden">
              <p>Run this command in your project folder:</p>
              <code id="agent-command-text"></code>
            </div>
          </div>
        </div>
      </div>
      <audio id="bgm" preload="auto">
        <source src="/audio/motivate-the-floor.mp3" type="audio/mpeg" />
      </audio>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
